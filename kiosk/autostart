# Disable screensavers / screen blanking / power management
xset s off
xset s noblank
xset -dpms

# Allow quitting the X server with CTRL-ATL-Backspace
unclutter -display 0:0 -noevents -grab

# Start Backend Server and restart when updated
let bdr = /home/kiosk-user/mrbartender
forever start -o "$bdr/logs/output.log" -e "$bdr/logs/errors.log" -w --watchDirectory "$bdr/server" "$bdr/server/index.js" &

# Start Chromium in kiosk mode
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' ~/.config/chromium/'Local State'
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/; s/"exit_type":"[^"]\+"/"exit_type":"Normal"/' ~/.config/chromium/Default/Preferences

sleep 5 && chromium-browser --no-first-run --disable --disable-translate --disable-infobars --disable-suggestions-service --disable-save-password-bubble --start-maximized --kiosk "http://localhost:3000/" &
